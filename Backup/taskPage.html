<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>AlzReminders</title>

    <!-- Font Icon -->
    <link rel="stylesheet" href="fonts/material-icon/css/material-design-iconic-font.min.css">

    <!-- Main css -->
    <link rel="stylesheet" href="css/style.css">

    <style>
        table {
          border-collapse: collapse;
        }

        tr, th, td {
          padding: 5px;
          border: solid 1px black;
        }


        th {
          font-weight: bold;
        }
    </style>

    <script type="text/javascript" src="https://npmcdn.com/parse/dist/parse.min.js">   
    </script>
    <script type="text/javascript" src="scripts/behaviour.js"></script>
</head>
<body>

    <div class="main">

        <!-- Sing in  Form -->
        <section class="sign-in">
            <div class="container">
                <div class="signin-content">
                    <div class="signin-image">
                        <figure><img src="images/alzRemindersLogo.png" alt="AlzReminders App"></figure>
                        
                    </div>

                    <div class="signin-form">
                        <h2 class="form-title">Tasks</h2>
                        <form method="POST" class="register-form" id="login-form">
                            <div class="form-group">
                                <label for="add_task"><i class="zmdi zmdi-account material-icons-name"></i></label>
                                <input type="text" name="add_task" id="add_task" placeholder="Add A Task"/>
                            </div>

                            
                            <!--<div class="form-group">
                                <input type="checkbox" name="agree-term" id="agree-term" class="agree-term" />
                                <label for="agree-term" class="label-agree-term"><span><span></span></span>I agree all statements in  <a href="#" class="term-service">Terms of service</a></label>
                            </div>*/-->
                            <div class="form-group form-button">
                                    <!--<button  onclick="addTask(); return false;">Add Task</button>-->
                                    <button onclick="addAndRefresh(); return false">Add Task</button>
                                    <button onclick="deleteAndRefresh(); return false">Delete Task</button>
                            </div>
                            <table>
                              <tr>
                                <th>To Do:</th>
                              </tr>
                            </table>
                        </form>
                    </div>
                </div>
            </div>
        </section>

    </div>

    <!--<script>

        
        
        Parse.initialize("Um5azHXQfLSlYJVJqg2pL6SkQcJVXcLPyTNt1V4P", "6b1GVky3F5euaOWpggwgqigBlJ3NHNxswYeFaRyy"); 
        Parse.serverURL = "https://parseapi.back4app.com/";
       

        window.onload = showTableOnLoad();

        function refresh() {
            location.reload(true);
        }

        function addAndRefresh() {
            addTask();
            setTimeout(function(){refresh();}, 1000);
        }

        function deleteAndRefresh() {
            deleteTask();
            setTimeout(function(){refresh();}, 1000);
        }



        async function addTask(){

            var addTaskText = document.getElementById("add_task").value.toString();
            
            var user = Parse.User
            .logIn("123", "123").then(function(user) {
                console.log('User created successful with name: ' + user.get("username") + ' and email: ' + user.get("email"));
                user.addUnique('Tasks', addTaskText);
                user.save();
            
                
            
            }).catch(function(error){
                console.log("Error: " + error.code + " " + error.message);
            });
            
        }


        async function deleteTask(){
            var addTaskText = document.getElementById("add_task").value.toString();
            
            var user = Parse.User
        .logIn("123", "123").then(function(user) {
            console.log('User created successful with name: ' + user.get("username") + ' and email: ' + user.get("email"));
            user.remove('Tasks', addTaskText);
            
            user.save();
            }).catch(function(error){
                console.log("Error: " + error.code + " " + error.message);
            });
        }



        

        function showTableOnLoad() {
        var user = Parse.User
        .logIn("123", "123").then(function(user) {
            console.log('User created successful with name: ' + user.get("username") + ' and email: ' + user.get("email"));

            var arr = user.get('Tasks'),
                table = document.getElementsByTagName('table')[0],
                tr = null,
                td = null,
                txt = '';

            for (var i = 0; i < arr.length; i++) {

                var newButton  = document.createElement("BUTTON");
                newButton.id = i;

                newButton.innerHTML = "Edit";
                newButton.addEventListener("click", function(e) {
                    e.preventDefault();
                    add_task.value = arr[this.id];
                    
                });


                txt = document.createTextNode(" " + arr[i]);
                td = document.createElement('td');
                tr = document.createElement('tr');
                td.appendChild(newButton);
                td.appendChild(txt);
                tr.appendChild(td);
                table.appendChild(tr);

            }

            }).catch(function(error){
                console.log("Error: " + error.code + " " + error.message);
            });
        }


            
    </script>-->




</body>
</html>